{% extends "layout.html" %}
{% block content %}
<div class = "site-instruction">
    <details><summary>Instructions</summary>
        When all players are ready, the first player to give clues begins the game by pressing Start. When their time is up, the next player presses Start on their device. Make sure to select your team before picking cards.
    </details>
</div>
<div class = "site-options">
    <form id = "start_stop" method="POST" action="/{{ gamename }}/{{ next_action }}_round/">
        <span class = "site-options1">
            <select name = "team">
                {% if team_checked == 'team1' %}
                <option value="team1" selected>Team 1</option>
                <option value="team2">Team 2</option>
                {% else %}
                <option value="team1">Team 1</option>
                <option value="team2" selected>Team 2</option>
                {% endif %}
            </select>
        </span>
        <span class = "site-options2">
            <button type="submit" id="start_stop">{{ next_action_label }}</button>
        </span>
    </form>
    <div id = "cardpicked">{{ card }}</div>
</div>
<div class = "site-submit">
    <form id = "confirm" method="POST" action="/{{ gamename }}/pick_card/">
        <span class = "site-options1">
            <button type="submit" name="card_success" value="false" {{ disabled }}><span class="material-icons">clear</span></button>
        </span>
        <span class = "site-options2">
            <button type="submit" name="card_success" value="true" {{ disabled }}><span class="material-icons">check</span></button>
        </span>
    </form>
    {% if next_action == "stop" %}
    <div id = "clock">
        <p id="clock"></p>
    </div><br>
    {% endif %}
</div>
<div class = "site-status">
    <p id = "instruction">Game status:</p>
    <p id = "status">
        <span>Team 1: {{ team1_score }}</span><br>
        <span>Team 2: {{ team2_score }}</span><br>
        <span>Round: {{ current_round }}</span><br>
        <span>Cards remaining this round: {{ numcards }} / {{ numcardstotal }}</span><br>
    </p>
    <form id = "hardreset" method="GET" action="/{{ gamename }}/hard_reset/">
        <button type="submit" id="game_option">Reset game</button>
    </form>
</div>

{% endblock %}

{% block scripts %}
    <script>
        var clock = document.getElementById("clock");

        setInterval(() => {
            fetch("{{ url_for('time_feed') }}")
            .then(response => {
                    response.text().then(t => {clock.innerHTML = t})
                });
            }, 1000);  
    </script>
{% endblock %}

